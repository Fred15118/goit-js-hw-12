{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict'\n\nimport axios from 'axios';\n\naxios.defaults.baseURL  = 'https://pixabay.com/api/';\nconst API_KEY = '43978229-66aec4be0aecfd6358506c605';\n\nexport async function getImages(q, page, per_page) {\n    const searchParams = new URLSearchParams({\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page,\n    page,\n    });\n    \n    return await axios.get(`?${searchParams}`)\n}","'use strict';\n\nexport function createMarkup(hitsArray) {\n  const markup = hitsArray\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"item-results\">\n          <a href=\"${largeImageURL}\" class=\"gallery-link\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img\"/>\n          </a>\n          <div class=\"wrap-info\">\n            <ul class=\"list-info\">\n              <li class=\"item-info\">\n                <p class=\"headline-info\">Likes</p>\n                <p class=\"text-info\">${likes}</p>\n              </li>\n              <li class=\"item-info\">\n                <p class=\"headline-info\">Views</p>\n                <p class=\"text-info\">${views}</p>\n              </li>\n              <li class=\"item-info\">\n                <p class=\"headline-info\">Comments</p>\n                <p class=\"text-info\">${comments}</p>\n              </li>\n              <li class=\"item-info\">\n                <p class=\"headline-info\">Downloads</p>\n                <p class=\"text-info\">${downloads}</p>\n              </li>\n            </ul>\n          </div>\n        </li>`\n    )\n    .join('');\n\n  return markup\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\n\nconst refs = {\n    userRequest: document.querySelector('.form__input'),\n    form: document.querySelector('.form'),\n    resultsList: document.querySelector('.gallery'),\n    loader: document.querySelector('.loader'),\n    loadMoreBtn: document.querySelector('.load-more__btn'),\n}\n\nlet inputValue = '';\nlet pageNumber = 1;\nlet perPage = 15;\n\nfunction getData(inputValue,pageNumber,perPage) {\n    return getImages(inputValue, pageNumber, perPage)\n        .then(({ data }) => {\n            if (data.hits.length === 0) {\n                iziToast.info({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: \"topRight\",\n                })\n            }\n        \n            refs.resultsList.insertAdjacentHTML(\"beforeend\", createMarkup(data.hits));\n            lightbox.refresh();\n            refs.loadMoreBtn.classList.remove('is-hidden');\n\n            const totalPages = Math.ceil(data.totalHits / perPage);\n            \n            if (pageNumber >= totalPages) {\n                iziToast.info({\n                    message: 'We`re sorry, but you`ve reached the end of search results.',\n                    position: \"topRight\"\n                });\n                refs.loadMoreBtn.classList.add('is-hidden');\n            }\n        })\n        .catch(error => console.log(error))\n        .finally(() => {\n            refs.loader.classList.add('is-hidden')\n        });\n}\n\n\nfunction submitHandler(event) {\n    event.preventDefault();\n    \n    inputValue = refs.userRequest.value.trim();\n\n    if (!inputValue) {\n        return iziToast.warning({\n            message: \"That field can't be empty!\",\n            position: \"topRight\",\n            backgroundColor: 'red',\n        })\n    }\n\n    event.target.reset();\n    refs.loader.classList.remove('is-hidden');\n    pageNumber = 1;\n    refs.resultsList.innerHTML = '';\n\n    getData(inputValue, pageNumber, perPage);\n}\n\nasync function increasePageNumber() {\n    pageNumber += 1;\n\n    refs.loader.classList.remove('is-hidden');\n    refs.loadMoreBtn.classList.add('is-hidden');\n\n    await getData(inputValue, pageNumber, perPage);\n    smoothScoll();\n}\n\nfunction smoothScoll() {\n    refs.lastGalleryItem = document.querySelector('.item-results:last-child');\n    refs.lastGalleryItemHeight = refs.lastGalleryItem.getBoundingClientRect().height;\n    \n    window.scrollBy({\n        top: refs.lastGalleryItemHeight * 2,\n        left: 0,\n        behavior: 'smooth',\n    });\n}\n\nrefs.form.addEventListener('submit', submitHandler);\nrefs.loadMoreBtn.addEventListener('click',increasePageNumber)"],"names":["axios","API_KEY","getImages","q","page","per_page","searchParams","createMarkup","hitsArray","largeImageURL","webformatURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","refs","inputValue","pageNumber","perPage","getData","data","iziToast","totalPages","error","submitHandler","event","increasePageNumber","smoothScoll"],"mappings":"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"}